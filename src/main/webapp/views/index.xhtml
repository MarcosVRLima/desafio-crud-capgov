<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Login | Consultas</title>
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
</h:head>

<h:body class="bg-light">

	<f:metadata>
	    <f:viewAction action="#{loginBean.redirecionarSeLogado}" />
	</f:metadata>

    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-12 col-sm-10 col-md-8 col-lg-5">
                <div class="card shadow-sm border-0">
                    <div class="card-body p-4">
                        <h3 class="mb-3 text-center">Entrar</h3>

                        <!-- Mensagens globais JSF -->
                        <h:messages id="msgs"
                                    globalOnly="true"
                                    layout="list"
                                    errorClass="alert alert-danger"
                                    infoClass="alert alert-info"
                                    warnClass="alert alert-warning"
                                    styleClass="mb-3"/>

                        <h:form id="formLogin">
                            <div class="mb-3">
                                <label for="email" class="form-label">E-mail</label>
                                <h:inputText id="email"
								             value="#{loginBean.email}"
								             required="true"
								             requiredMessage="Informe o e-mail."
								             styleClass="form-control"
								             placeholder="seu@email.com">
								    <f:validateRegex pattern="^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}$"
								                     message="E-mail inválido"/>
								</h:inputText>
                                <h:message for="email" styleClass="text-danger small"/>
                            </div>

                            <div class="mb-3">
                                <label for="senha" class="form-label">Senha</label>
                                <h:inputSecret id="senha"
                                               value="#{loginBean.senha}"
                                               required="true"
                                               requiredMessage="Informe a senha."
                                               styleClass="form-control"
                                               placeholder="••••••••"/>
                                <h:message for="senha" styleClass="text-danger small"/>
                            </div>

                            <div class="d-grid">
                                <h:commandButton value="Entrar"
                                                 action="#{loginBean.logar}"
                                                 styleClass="btn btn-primary"/>
                            </div>
                        </h:form>
                    </div>
                </div>

                <p class="text-center text-muted mt-3 mb-0" style="font-size:.9rem">
                    Sistema de Consultas — Acesso restrito
                </p>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS (opcional) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"/>
</h:body>
</html>
